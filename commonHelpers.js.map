{"version":3,"file":"commonHelpers.js","sources":["../src/js/render-function.js","../src/js/pixabay-api.js","../src/main.js"],"sourcesContent":["import SimpleLightbox from 'simplelightbox';\n\n// Ініціалізація SimpleLightbox\nconst lightbox = new SimpleLightbox('.gallery a', {\n  captionsData: 'alt',\n  captionDelay: 250,\n});\n\nexport function renderImgCard(images) {\n  const galleryList = document.querySelector('.gallery');\n  galleryList.innerHTML = '';\n  const markup = images\n    .map(\n      ({ largeImageURL, webformatURL, likes, views, comments, downloads }) =>\n        `\n      <li class=\"gallery-item\">\n        <a href=\"${largeImageURL}\">\n          <img src=\"${webformatURL}\" alt=\"\" class=\"card-img\"/>\n        </a>\n        <ul class=\"gallery-item-description\">\n          <li>\n            <p class=\"count-text\">Likes</p>\n            <p class=\"count\">${likes}</p>\n          </li>\n          <li>\n            <p class=\"count-text\">Views</p>\n            <p class=\"count\">${views}</p>\n          </li>\n          <li>\n            <p class=\"count-text\">Comments</p>\n            <p class=\"count\">${comments}</p>\n          </li>\n          <li>\n            <p class=\"count-text\">Downloads</p>\n            <p class=\"count\">${downloads}</p>\n          </li>\n        </ul>\n      </li>\n      `\n    )\n    .join('');\n\n  galleryList.insertAdjacentHTML('afterbegin', markup);\n\n  // Після оновлення галереї викликаємо метод refresh() для SimpleLightbox\n  lightbox.refresh();\n}\n","import axios from 'axios';\n\nconst API_KEY = '44784729-ebc9a0f5cc587c2700d41657d';\nconst imageType = 'photo';\nconst orientation = 'horizontal';\nconst safeSearch = true;\nconst perPage = 15; // Кількість зображень на сторінці\n\nexport async function getPicturesByQuery(query, page = 1) {\n  const url = `https://pixabay.com/api/?key=${API_KEY}&q=${query}&image_type=${imageType}&orientation=${orientation}&safesearch=${safeSearch}&per_page=${perPage}&page=${page}`;\n\n  try {\n    const response = await axios.get(url);\n    return response.data;\n  } catch (error) {\n    console.error('Error fetching data:', error);\n    throw error;\n  }\n}\n","// main.js\n\nimport iziToast from 'izitoast';\nimport { renderImgCard } from './js/render-function.js';\nimport { getPicturesByQuery } from './js/pixabay-api.js';\n\nconst searchForm = document.querySelector('.search-form');\nconst gallery = document.querySelector('.gallery');\nconst loadMoreBtn = document.querySelector('.load-more');\nconst loader = document.querySelector('.loader');\n\nlet currentPage = 1;\nlet currentQuery = '';\n\nsearchForm.addEventListener('submit', handleSearch);\n\nfunction handleSearch(evt) {\n  evt.preventDefault();\n  currentPage = 1; // Скидаємо сторінку до початкового значення при новому пошуку\n  currentQuery = evt.currentTarget.elements.query.value.trim().toLowerCase();\n\n  if (!currentQuery) {\n    iziToast.error({\n      title: 'Error',\n      message: 'Please enter a search query.',\n      position: 'topRight',\n      timeout: 2000,\n    });\n    return;\n  }\n\n  fetchImages(currentQuery, currentPage);\n}\n\nasync function fetchImages(query, page) {\n  try {\n    loader.style.display = 'block'; // Показати індикатор завантаження\n\n    const data = await getPicturesByQuery(query, page);\n\n    if (data.hits.length === 0) {\n      iziToast.warning({\n        title: 'Warning',\n        message: 'Nothing found for your request.',\n        position: 'topRight',\n        timeout: 2000,\n      });\n      clearGallery();\n      return;\n    }\n\n    renderImgCard(data.hits); // Відобразити отримані зображення\n\n    // Показати кнопку \"Load more\" після першого завантаження зображень\n    loadMoreBtn.style.display = 'block';\n\n    // Перевірити, чи потрібно ховати кнопку \"Load more\" після першого завантаження\n    checkLoadMoreVisibility(data.totalHits, page);\n  } catch (error) {\n    console.error('Error fetching images:', error);\n    iziToast.error({\n      title: 'Error',\n      message: 'Failed to fetch images. Please try again later.',\n      position: 'topRight',\n      timeout: 2000,\n    });\n  } finally {\n    loader.style.display = 'none'; // Ховаємо індикатор завантаження незалежно від результату\n  }\n}\n\nfunction clearGallery() {\n  gallery.innerHTML = ''; // Очистити галерею в разі пустого результату пошуку\n  loadMoreBtn.style.display = 'none'; // Ховаємо кнопку \"Load more\" при пустому результаті\n}\n\nfunction checkLoadMoreVisibility(totalHits, page) {\n  const perPage = 15; // Кількість зображень на сторінці\n\n  // Перевірка, чи досягнуто кінця колекції зображень\n  if (page * perPage >= totalHits) {\n    loadMoreBtn.style.display = 'none';\n    iziToast.info({\n      title: 'Info',\n      message: \"We're sorry, but you've reached the end of search results.\",\n      position: 'topRight',\n      timeout: 2000,\n    });\n  } else {\n    loadMoreBtn.style.display = 'block';\n  }\n}\n\nloadMoreBtn.addEventListener('click', handleLoadMore);\n\nasync function handleLoadMore() {\n  currentPage++;\n  await fetchImages(currentQuery, currentPage);\n\n  // Плавне прокручування сторінки після завантаження нових зображень\n  smoothScroll();\n}\n\nfunction smoothScroll() {\n  const cardHeight = gallery.firstElementChild.getBoundingClientRect().height;\n  window.scrollBy({\n    top: cardHeight * 2,\n    behavior: 'smooth',\n  });\n}\n"],"names":["lightbox","SimpleLightbox","renderImgCard","images","galleryList","markup","largeImageURL","webformatURL","likes","views","comments","downloads","API_KEY","imageType","orientation","safeSearch","perPage","getPicturesByQuery","query","page","url","axios","error","searchForm","gallery","loadMoreBtn","loader","currentPage","currentQuery","handleSearch","evt","iziToast","fetchImages","data","clearGallery","checkLoadMoreVisibility","totalHits","handleLoadMore","smoothScroll","cardHeight"],"mappings":"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"}